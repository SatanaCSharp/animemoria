# AWS Secrets Store CSI Driver — users-service
# Reads from AWS Secrets Manager secret "animemoria/users-service" (JSON key-value object).
# Used by: users-graphql, users-grpc
# Only actual secrets — connectivity vars (URLs, ports) are managed via Helm env.
apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: users-service-secrets
spec:
  provider: aws
  parameters:
    objects: |
      - objectName: "animemoria/users-service"
        objectType: "secretsmanager"
        jmesPath:
          - path: DB_CONNECTION_URL
            objectAlias: DB_CONNECTION_URL
