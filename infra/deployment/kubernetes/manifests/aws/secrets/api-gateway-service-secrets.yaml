# AWS Secrets Store CSI Driver — api-gateway-service
# Reads from AWS Secrets Manager secret "animemoria/api-gateway-service" (JSON key-value object).
# Used by: api-gateway-graphql, api-gateway-rest
# Only actual secrets — connectivity vars (URLs, ports) are managed via Helm env.
apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: api-gateway-service-secrets
spec:
  provider: aws
  parameters:
    objects: |
      - objectName: "animemoria/api-gateway-service"
        objectType: "secretsmanager"
        jmesPath:
          - path: AT_SECRET
            objectAlias: AT_SECRET
          - path: RT_SECRET
            objectAlias: RT_SECRET
          - path: COOKIES_MAX_AGE
            objectAlias: COOKIES_MAX_AGE
          - path: CORS_ORIGINS
            objectAlias: CORS_ORIGINS
