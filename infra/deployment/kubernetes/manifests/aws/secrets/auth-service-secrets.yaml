# AWS Secrets Store CSI Driver — auth-service
# Reads from AWS Secrets Manager secret "animemoria/auth-service" (JSON key-value object).
# Used by: auth-graphql, auth-grpc
# Only actual secrets — connectivity vars (URLs, ports) are managed via Helm env.
apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: auth-service-secrets
spec:
  provider: aws
  parameters:
    objects: |
      - objectName: "animemoria/auth-service"
        objectType: "secretsmanager"
        jmesPath:
          - path: DB_CONNECTION_URL
            objectAlias: DB_CONNECTION_URL
          - path: AT_SECRET
            objectAlias: AT_SECRET
          - path: RT_SECRET
            objectAlias: RT_SECRET
          - path: COOKIES_MAX_AGE
            objectAlias: COOKIES_MAX_AGE
